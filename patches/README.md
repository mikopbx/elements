# Патчи для интернационализации внешних библиотек

Эта папка содержит патчи для поддержки i18n в сторонних библиотеках Stoplight Elements.

## @stoplight/json-schema-viewer v4.16.3

**Файл:** `@stoplight+json-schema-viewer+4.16.3.patch`

### Назначение
Добавляет поддержку интернационализации для свойств схем JSON:
- `required` (обязательное поле)
- `read-only` (только для чтения)

### Изменения
Модифицирует компонент `Properties` в файлах:
- `index.js` (CommonJS)
- `index.mjs` (ES Modules)

Добавляет локальную функцию `t(key)`, которая:
1. Проверяет наличие глобальной функции `i18n()`
2. Вызывает `i18n(key)` если доступна
3. Возвращает ключ как есть, если i18n недоступна

### Применение патча

#### Автоматически (рекомендуется)
При использовании `patch-package`:
```bash
yarn add -D patch-package postinstall-postinstall
```

Добавьте в `package.json`:
```json
{
  "scripts": {
    "postinstall": "patch-package"
  }
}
```

#### Вручную
После установки зависимостей применить патч:
```bash
cd node_modules/@stoplight/json-schema-viewer
# Применить изменения вручную из patch файла
```

### Переводы
Используемые ключи переводов в MikoPBX:
- `sl_Required` → "обязательный" (русский)
- `sl_ReadOnly` → "только для чтения" (русский)

### Совместимость
- Версия библиотеки: `4.16.3`
- При обновлении библиотеки патч может потребовать обновления

## Создание новых патчей

Если нужно пропатчить другую библиотеку:

1. Внесите изменения в `node_modules/<библиотека>`
2. Создайте патч:
   ```bash
   npx patch-package <название-пакета>
   ```
3. Патч автоматически сохранится в `patches/`

## Примечания

- Патчи применяются только к скомпилированным файлам `.js` и `.mjs`
- Исходники TypeScript в `node_modules` не модифицируются
- Патчи включаются в итоговый бандл `web-components.min.js`
